<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jo√£o & Maria - 8 Meses</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@200;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff4d6d; --dark: #050505; --gold: #d4af37; --glass: rgba(255, 255, 255, 0.05); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: var(--dark); font-family: 'Montserrat', sans-serif; color: white;
            overflow: hidden;
        }

        .slider { 
            display: flex; width: 1200vw; height: 100vh;
            transition: transform 0.6s cubic-bezier(0.45, 0, 0.55, 1);
        }

        section { 
            width: 100vw; height: 100vh; 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center; 
            padding: 20px; position: relative;
            overflow-y: auto; -webkit-overflow-scrolling: touch;
        }

        .container { text-align: center; max-width: 500px; width: 100%; padding-bottom: 120px; }
        
        .photo-frame {
            width: 200px; height: 200px; margin: 0 auto 20px; border: 2px solid var(--gold);
            padding: 5px; background: rgba(255,255,255,0.05); backdrop-filter: blur(10px);
            border-radius: 50%; box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); overflow: hidden;
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        h2 { font-family: 'Dancing Script', cursive; font-size: 3rem; color: var(--pink); margin: 10px 0; }
        .love-text { font-size: 1.1rem; line-height: 1.6; color: #ffffff; text-align: center; margin: 20px 0; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px; }

        .counter-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .counter-item { background: var(--glass); padding: 15px 5px; border-radius: 10px; border: 1px solid var(--gold); }
        .counter-item span { display: block; font-size: 1.3rem; color: var(--gold); font-weight: bold; }

        .interaction-box { background: var(--glass); padding: 25px; border-radius: 20px; border: 1px solid var(--gold); margin: 20px 0; position: relative; }
        
        .nav-link-container {
            position: fixed; bottom: 25px; left: 0; width: 100%;
            display: flex; justify-content: center; gap: 20px; z-index: 9999;
        }
        .nav-btn {
            background: rgba(255, 77, 109, 0.4); 
            backdrop-filter: blur(4px);
            color: white; text-decoration: none;
            padding: 15px 25px; border-radius: 15px; font-weight: bold;
            font-size: 1.1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            min-width: 130px; text-align: center; display: inline-block;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn-custom { background: var(--pink); border: none; color: white; padding: 12px 20px; border-radius: 50px; cursor: pointer; font-weight: bold; margin-top: 10px; width: 100%; }
        
        /* Listas e Bot√µes de A√ß√£o */
        .list-item { background: rgba(255,255,255,0.1); padding: 12px; margin-top: 8px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid var(--pink); }
        .list-actions { display: flex; gap: 8px; }
        .action-btn { background: none; border: 1px solid rgba(255,255,255,0.3); color: white; border-radius: 8px; padding: 5px 8px; cursor: pointer; font-size: 0.8rem; }
        .btn-delete { border-color: #ff4d4d; color: #ff4d4d; }
        .btn-check { border-color: #4caf50; color: #4caf50; }
        .done-text { text-decoration: line-through; opacity: 0.5; color: #4caf50; }

        .music-card { background: var(--glass); border: 1px solid var(--pink); padding: 10px; border-radius: 10px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center; }
        
        #photoPreview { width: 100%; max-height: 200px; object-fit: contain; margin-top: 15px; border-radius: 10px; display: none; border: 1px solid var(--gold); }
        .album-card { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-top: 15px; border-left: 5px solid var(--pink); text-align: left; position: relative;}
        .album-card img { width: 100%; border-radius: 10px; margin-bottom: 10px; }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; pointer-events: none; }
    </style>
</head>
<body>

    <div class="slider" id="mainSlider">
        <section>
            <div class="container">
                <div class="photo-frame"><img src="foto1.jpeg" onerror="this.src='https://via.placeholder.com/200'"></div>
                <h2>Jo√£o & Maria</h2>
                <p class="love-text">Sabe, minha princesa, eu sempre acreditei que algumas hist√≥rias j√° nascem escritas nas estrelas. Somos Jo√£o e Maria, mas nossa hist√≥ria √© muito melhor que a dos livros. No nosso mundo real, nem tudo s√£o flores, mas √© justamente a nossa uni√£o que nos faz superar qualquer desafio. Voc√™ √© a minha vida, o encaixe exato de tudo o que eu sempre sonhei sem nem saber que existia. Nesses 8 meses, cada risada e cada plano confirmam que fomos feitos um para o outro. E mesmo que a gente n√£o viva em um conto de fadas, o nosso amor real traz a √∫nica frase de fic√ß√£o que eu fa√ßo quest√£o de realizar com voc√™: o nosso "felizes para sempre."</p>
            </div>
        </section>

        <section>
            <div class="container">
                <div class="photo-frame"><img src="foto2.jpeg" onerror="this.src='https://via.placeholder.com/200'"></div>
                <div class="counter-grid" id="timer"></div>
                <p class="love-text">Amar voc√™ n√£o √© sorte, √© a melhor decis√£o que eu tomo todas as manh√£s ao despertar. S√£o 8 meses de cumplicidade, onde o tempo parece voar e parar ao mesmo tempo quando estou com voc√™. Nosso amor ele n√£o √© daquele que com o tempo vai se acabando √© ao contr√°rio disso ele cresce, se fortalece e se renova a cada batida do meu cora√ß√£o por voc√™.</p>
            </div>
        </section>

        <section>
            <div class="container">
                <div class="photo-frame"><img src="foto3.jpeg" onerror="this.src='https://via.placeholder.com/200'"></div>
                <div class="interaction-box">
                    <h3 style="font-family: 'Dancing Script'; color: var(--pink); font-size: 2rem;">O que eu mais gosto em voc√™?</h3>
                    <input type="text" id="userInput" oninput="checkLove()" style="width:100%; background:none; border:none; border-bottom:2px solid var(--pink); color:white; text-align:center; padding:10px;" placeholder="Escreva aqui...">
                    <p id="loveResponse" style="margin-top:15px; font-weight:bold; color:var(--pink); display:none;">Voc√™ acertou! Eu amo cada detalhe seu, gosto de absolutamente TUDO em voc√™! ‚ù§Ô∏è</p>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <div class="photo-frame"><img src="foto4.jpeg" onerror="this.src='https://via.placeholder.com/200'"></div>
                <div class="interaction-box" style="border-radius: 50px;">
                    <a href="https://www.youtube.com/watch?v=eyhqJywl2wA" target="_blank" style="color: white; text-decoration: none; font-weight: bold;">üéµ TOQUE AQUI PARA OUVIR NOSSA M√öSICA ‚ù§Ô∏è</a>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--pink); font-size: 2.5rem;">M√∫sicas que lembram a gente</h3>
                <div class="interaction-box">
                    <input type="text" id="musicName" style="width:100%; background:none; border:none; border-bottom:1px solid var(--pink); color:white; margin-bottom:10px;" placeholder="Nome da m√∫sica...">
                    <input type="text" id="musicLink" style="width:100%; background:none; border:none; border-bottom:1px solid var(--pink); color:white;" placeholder="Link do YouTube...">
                    <button class="btn-custom" onclick="addMusic()">SALVAR M√öSICA</button>
                    <div id="playlistContainer" style="margin-top:15px; text-align:left;"></div>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--gold); font-size: 2.5rem;">Nosso Cofre</h3>
                <div class="interaction-box">
                    <div class="progress-bar" style="width:100%; height:15px; background:#333; border-radius:10px; overflow:hidden;"><div id="bar" style="height:100%; background:var(--gold); width:0%; transition: 0.5s;"></div></div>
                    <p>Total: R$ <span id="currentMoney">0.00</span> / R$ 5000</p>
                    <input type="number" id="moneyInput" style="width:100%; background:none; border:none; border-bottom:2px solid var(--gold); color:white; text-align:center;" placeholder="Adicionar R$">
                    <button class="btn-custom" onclick="addMoney()">ADICIONAR</button>
                    <button class="btn-custom" style="background:none; border: 1px solid #ff4d4d; color:#ff4d4d; font-size: 0.7rem; margin-top: 20px; width: auto; padding: 5px 10px;" onclick="resetCofre()">RESTAR COFRE</button>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--pink); font-size: 2.5rem;">Planos Futuros</h3>
                <div class="interaction-box">
                    <input type="text" id="wishInput" style="width:100%; background:none; border:none; border-bottom:2px solid var(--pink); color:white; text-align:center;" placeholder="Novo sonho...">
                    <button class="btn-custom" onclick="addWish()">ADICIONAR PLANO</button>
                    <div id="wishList" style="text-align:left; margin-top:15px;"></div>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--gold); font-size: 2.5rem;">Espa√ßo do Di√°logo</h3>
                <div class="interaction-box" style="border-style: dashed;">
                    <textarea id="issueInput" style="width:100%; background:none; border:1px solid var(--gold); color:white; border-radius:10px; padding:10px;" placeholder="Algo incomodou?"></textarea>
                    <button class="btn-custom" onclick="addIssue()">REGISTRAR</button>
                    <div id="issueList" style="text-align:left; margin-top:10px;"></div>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--pink); font-size: 2.5rem;">Quem √© mais prov√°vel?</h3>
                <div class="interaction-box">
                    <p id="gameQuestion" style="min-height: 80px;">Clique abaixo!</p>
                    <button class="btn-custom" onclick="nextQuestion()">PR√ìXIMA PERGUNTA</button>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--gold); font-size: 2.5rem;">Nossa Mem√≥ria</h3>
                <div class="interaction-box">
                    <h4 id="memoryQuestion" style="min-height: 60px;">Onde foi nosso primeiro beijo?</h4>
                    <button class="btn-custom" onclick="nextMemory()">OUTRO DESAFIO</button>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <h3 style="font-family: 'Dancing Script'; color: var(--pink); font-size: 2.5rem;">Nosso √Ålbum</h3>
                <div class="interaction-box">
                    <input type="file" id="imgUpload" accept="image/*" style="display: none;">
                    <button class="btn-custom" onclick="document.getElementById('imgUpload').click()">ESCOLHER FOTO</button>
                    <img id="photoPreview">
                    <textarea id="photoDesc" style="width:100%; background:none; border:1px solid var(--pink); color:white; border-radius:10px; margin-top:10px; padding:10px;" placeholder="Descri√ß√£o..."></textarea>
                    <button class="btn-custom" onclick="savePhoto()">REGISTRAR NO √ÅLBUM</button>
                </div>
                <div id="albumContainer"></div>
            </div>
        </section>

        <section id="sky-page">
            <canvas id="skyCanvas"></canvas>
            <div class="container" style="z-index: 20;">
                <div class="photo-frame" style="width: 180px; height: 180px;"><img src="foto5.jpeg" onerror="this.src='https://via.placeholder.com/200'"></div>
                <h2 style="color: white; font-size: 2rem;">O C√©u de 05/07/2025</h2>
                <div style="font-family: 'Dancing Script'; font-size: 3rem; color: var(--gold);">Sempre N√≥s</div>
            </div>
        </section>
    </div>

    <div class="nav-link-container">
        <a href="javascript:void(0)" class="nav-btn" onclick="move(-1)">‚Üê VOLTAR</a>
        <a href="javascript:void(0)" class="nav-btn" onclick="move(1)">PR√ìXIMO ‚Üí</a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot, updateDoc, arrayUnion, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC-iYyjNDCJl7bJSk_CLVFWrlDC8ZIEfzk",
            authDomain: "sitedonossoamor.firebaseapp.com",
            projectId: "sitedonossoamor",
            storageBucket: "sitedonossoamor.firebasestorage.app",
            messagingSenderId: "668011345419",
            appId: "1:668011345419:web:f9297068f6adcb64fa390e"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const docRef = doc(db, "casal", "dados_v1");

        async function init() {
            const snap = await getDoc(docRef);
            if (!snap.exists()) {
                await setDoc(docRef, { cofre: 0, planos: [], dialogos: [], musicas: [], album: [] });
            }
        }
        init();

        onSnapshot(docRef, (doc) => {
            const data = doc.data();
            if(!data) return;

            // Cofre
            document.getElementById('currentMoney').innerText = parseFloat(data.cofre || 0).toFixed(2);
            document.getElementById('bar').style.width = Math.min(((data.cofre || 0)/5000)*100, 100) + "%";

            // Playlist
            document.getElementById('playlistContainer').innerHTML = (data.musicas || []).map((m, i) => `
                <div class="music-card">
                    <div><strong>${m.name}</strong><br><a href="${m.link}" target="_blank" style="color:var(--pink); font-size:0.8rem;">Ouvir</a></div>
                    <button class="action-btn btn-delete" onclick="removeItem('musicas', ${i})">X</button>
                </div>
            `).reverse().join('');

            // Planos (Com Bot√£o de Feito e Excluir)
            document.getElementById('wishList').innerHTML = (data.planos || []).map((p, i) => `
                <div class="list-item">
                    <span class="${p.feito ? 'done-text' : ''}">‚Ä¢ ${p.texto}</span>
                    <div class="list-actions">
                        <button class="action-btn btn-check" onclick="togglePlano(${i})">‚úì</button>
                        <button class="action-btn btn-delete" onclick="removeItem('planos', ${i})">X</button>
                    </div>
                </div>
            `).reverse().join('');

            // Di√°logos (Com Bot√£o Excluir)
            document.getElementById('issueList').innerHTML = (data.dialogos || []).map((d, i) => `
                <div class="list-item">
                    <span>‚Ä¢ ${d}</span>
                    <button class="action-btn btn-delete" onclick="removeItem('dialogos', ${i})">X</button>
                </div>
            `).reverse().join('');

            // √Ålbum (Com Bot√£o Excluir)
            document.getElementById('albumContainer').innerHTML = (data.album || []).map((a, i) => `
                <div class="album-card">
                    <img src="${a.img}">
                    <p>${a.text}</p>
                    <button class="action-btn btn-delete" style="position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.5);" onclick="removeItem('album', ${i})">Excluir</button>
                </div>
            `).reverse().join('');
        });

        // A√á√ïES GEN√âRICAS
        window.removeItem = async (campo, index) => {
            if(confirm("Tem certeza que deseja apagar?")) {
                const snap = await getDoc(docRef);
                let lista = snap.data()[campo];
                lista.splice(lista.length - 1 - index, 1); // Ajuste por causa do .reverse()
                await updateDoc(docRef, { [campo]: lista });
            }
        };

        window.togglePlano = async (index) => {
            const snap = await getDoc(docRef);
            let lista = snap.data().planos;
            let realIndex = lista.length - 1 - index;
            lista[realIndex].feito = !lista[realIndex].feito;
            await updateDoc(docRef, { planos: lista });
        };

        window.resetCofre = async () => {
            if(confirm("Deseja zerar o cofre?")) {
                await updateDoc(docRef, { cofre: 0 });
            }
        };

        // ADI√á√ïES
        window.addMoney = async () => {
            let v = parseFloat(document.getElementById('moneyInput').value);
            if(v) {
                const snap = await getDoc(docRef);
                await updateDoc(docRef, { cofre: (snap.data().cofre || 0) + v });
                document.getElementById('moneyInput').value = "";
            }
        };

        window.addWish = async () => {
            let t = document.getElementById('wishInput').value;
            if(t) {
                await updateDoc(docRef, { planos: arrayUnion({ texto: t, feito: false }) });
                document.getElementById('wishInput').value = "";
            }
        };

        window.addIssue = async () => {
            let t = document.getElementById('issueInput').value;
            if(t) {
                await updateDoc(docRef, { dialogos: arrayUnion(t) });
                document.getElementById('issueInput').value = "";
            }
        };

        window.addMusic = async () => {
            let n = document.getElementById('musicName').value;
            let l = document.getElementById('musicLink').value;
            if(n && l) {
                await updateDoc(docRef, { musicas: arrayUnion({ name: n, link: l }) });
                document.getElementById('musicName').value = ""; document.getElementById('musicLink').value = "";
            }
        };

        const imgInp = document.getElementById('imgUpload'), imgPre = document.getElementById('photoPreview');
        let selectedBase64 = "";
        imgInp.onchange = e => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onloadend = () => { selectedBase64 = reader.result; imgPre.src = selectedBase64; imgPre.style.display = 'block'; };
            if(file) reader.readAsDataURL(file);
        }

        window.savePhoto = async () => {
            const d = document.getElementById('photoDesc').value;
            if(d && selectedBase64) {
                await updateDoc(docRef, { album: arrayUnion({ img: selectedBase64, text: d }) });
                document.getElementById('photoDesc').value = ""; imgPre.style.display = 'none';
                selectedBase64 = "";
            }
        };

        // NAVEGA√á√ÉO E OUTROS
        let currentSlide = 0;
        window.move = (step) => {
            currentSlide = Math.max(0, Math.min(11, currentSlide + step));
            document.getElementById('mainSlider').style.transform = `translateX(-${currentSlide * 100}vw)`;
        };

        window.checkLove = () => {
            const val = document.getElementById('userInput').value.toLowerCase();
            document.getElementById('loveResponse').style.display = val.length > 2 ? 'block' : 'none';
        };

        const startDate = new Date('2025-06-15T00:00:00');
        function updateTimer() {
            const diff = new Date() - startDate;
            const d = Math.floor(diff / 86400000); 
            const h = Math.floor((diff % 86400000) / 3600000);
            const m = Math.floor((diff % 3600000) / 60000); 
            const s = Math.floor((diff % 60000) / 1000);
            document.getElementById('timer').innerHTML = `
                <div class="counter-item"><span>${d}</span><label>Dias</label></div>
                <div class="counter-item"><span>${h}</span><label>Horas</label></div>
                <div class="counter-item"><span>${m}</span><label>Min</label></div>
                <div class="counter-item"><span>${s}</span><label>Seg</label></div>`;
        }
        setInterval(updateTimer, 1000); updateTimer();

        const q1 = ["Quem √© mais prov√°vel de chorar?", "Quem √© mais teimoso?", "Quem esquece as chaves?", "Quem manda a primeira mensagem depois de uma briga?", "Quem √© mais ciumento?", "Quem cozinha melhor?"];
        window.nextQuestion = () => { document.getElementById('gameQuestion').innerText = q1[Math.floor(Math.random()*q1.length)]; }
        const q2 = ["Onde foi o primeiro beijo?", "Nossa m√∫sica?", "Nossa data?", "Qual foi a primeira coisa que Jo√£o disse para Maria?", "Qual a cor favorita dela?", "Quem disse eu te amo primeiro?"];
        window.nextMemory = () => { document.getElementById('memoryQuestion').innerText = q2[Math.floor(Math.random()*q2.length)]; }

        const canvas = document.getElementById('skyCanvas'), ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const stars = Array.from({length: 100}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*1.5 }));
        function draw() { ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle="white"; stars.forEach(s => { ctx.beginPath(); ctx.arc(s.x,s.y,s.size,0,Math.PI*2); ctx.fill(); }); requestAnimationFrame(draw); }
        draw();
    </script>
</body>
</html>
